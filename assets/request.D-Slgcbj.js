var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,i=(e,i)=>{for(var s in i||(i={}))a.call(i,s)&&o(e,s,i[s]);if(t)for(var s of t(i))r.call(i,s)&&o(e,s,i[s]);return e},s=(e,t,a)=>new Promise((r,o)=>{var i=e=>{try{n(a.next(e))}catch(t){o(t)}},s=e=>{try{n(a.throw(e))}catch(t){o(t)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,s);n((a=a.apply(e,t)).next())});import{y as n,E as l,z as c,s as u,G as p,H as d,g as h,J as m}from"./index-Dnm2z02F.js";const f="https://wechat-manage.onrender.com",v={AUTH:{REGISTER:`${f}/api/v1/auth/register`,LOGIN:`${f}/api/v1/auth/login`,LOGOUT:`${f}/api/v1/auth/logout`,PROFILE:`${f}/api/v1/user/profile`},FILE:{UPLOAD:`${f}/api/v1/files/upload`,PROCESS:`${f}/api/v1/files/process`,DOWNLOAD:`${f}/api/v1/files/download`,PREVIEW:`${f}/api/v1/files/preview`},HISTORY:{LIST:`${f}/api/v1/files/history`,DETAIL:`${f}/api/v1/files/detail`,DELETE:`${f}/api/v1/files`,CLEAR:`${f}/api/v1/files/history/clear`},AI:{CHAT:`${f}/api/v1/ai/chat`,HISTORY:`${f}/api/v1/ai/history`}};function E(){const e=m("token");return e?{Authorization:`Bearer ${e}`}:{}}function P(e){return s(this,null,function*(){const{url:t,method:a="GET",data:r,header:o={},showLoading:s=!0,loadingText:l="加载中..."}=e;s&&n({title:l,mask:!0});try{const e=yield new Promise((e,s)=>{p({url:t.startsWith("http")?t:`${f}${t}`,method:a,data:r,header:i(i({"Content-Type":"application/json"},E()),o),success:e,fail:s})});s&&c();const n=e.data;return 200!==n.code&&0!==n.code?401===n.code?(d("token"),d("userInfo"),h({url:"/pages/login/index"}),Promise.reject(new Error("登录已过期，请重新登录"))):Promise.reject(new Error(n.message||"请求失败")):n}catch(m){return s&&c(),u({title:m.message||"网络请求失败",icon:"none"}),Promise.reject(m)}})}const y={get:(e,t,a)=>P(i({url:e,method:"GET",data:t},a)),post:(e,t,a)=>P(i({url:e,method:"POST",data:t},a)),put:(e,t,a)=>P(i({url:e,method:"PUT",data:t},a)),delete:(e,t,a)=>P(i({url:e,method:"DELETE",data:t},a)),upload:(e,t,a)=>function(e){return s(this,null,function*(){const{url:t,filePath:a,name:r="file",formData:o={},showLoading:s=!0,loadingText:p="上传中..."}=e;s&&n({title:p,mask:!0});try{const e=yield new Promise((e,s)=>{l({url:t.startsWith("http")?t:`${f}${t}`,filePath:a,name:r,formData:o,header:i({},E()),success:e,fail:s})});s&&c();const n=JSON.parse(e.data);return 200!==n.code&&0!==n.code?Promise.reject(new Error(n.message||"上传失败")):n}catch(d){return s&&c(),u({title:d.message||"上传失败",icon:"none"}),Promise.reject(d)}})}(i({url:e,filePath:t},a))};export{v as A,y as h};
